<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">

    <body>

        <div class="form" metal:define-macro="form">

            <metal:title-slot define-slot="title">
              <h3 tal:condition="view/label | nothing" tal:content="view/label" />
            </metal:title-slot>

            <metal:define define-macro="titlelessform">

                <tal:status define="status view/status" condition="status">
                    <dl class="portalMessage error" tal:condition="view/widgets/errors">
                        <dt i18n:translate="">
                            Error
                        </dt>
                        <dd tal:content="status" />
                    </dl>
                    <dl class="portalMessage info" tal:condition="not: view/widgets/errors">
                        <dt i18n:translate="">
                            Info
                        </dt>
                        <dd tal:content="status" />
                    </dl>
                </tal:status>

                <div tal:define="errors view/widgets/errors" tal:condition="errors">
                    <div tal:repeat="error errors">
                        <tal:block
                            condition="not:nocall:error/widget"
                            replace="structure error/render"
                            />
                    </div>
                </div>

                <metal:description-slot define-slot="description">
                  <p  class="discreet"
                      tal:define="description view/description | nothing"
                      tal:condition="description"
                      tal:content="structure description">
                          Description
                  </p>
                </metal:description-slot>

                <form class="rowlike enableUnloadProtection" action="." method="post"
                      tal:define="groups view/groups | nothing;
                                  form_name view/form_name | nothing;
                                  form_class view/css_class | string:;
                                  default_fieldset_label view/default_fieldset_label | form_name;
                                  enable_form_tabbing view/enable_form_tabbing | python:True;
                                  has_groups python:bool(groups);
                                  form_tabbing python:(has_groups and enable_form_tabbing) and 'enableFormTabbing' or '';
                                  show_default_label python:has_groups and default_fieldset_label and len(view.widgets);
                                  "
                      tal:attributes="action view/action|request/getURL; 
                                      enctype view/enctype;
                                      class python:'rowlike enableUnloadProtection %s %s kssattr-formname-%s' % (form_tabbing, form_class, request.getURL().split('/')[-1]);
                                      id view/id;
                                      method view/method|string:'post'
                                      ">

                    <metal:block define-slot="formtop" />

                    <metal:fields-slot define-slot="fields">
                      <input type="hidden"
                          name="fieldset.current"
                          tal:define="current_fieldset request/fieldset.current | string:#fieldsetlegend-default"
                          tal:condition="python:has_groups and enable_form_tabbing"
                          tal:attributes="value current_fieldset"
                          />

                      <!-- Default fieldset -->
                      <metal:define
                          define-macro="fields"
                          tal:define="show_default_label show_default_label|nothing;
                                      has_groups has_groups|nothing">

                          <fieldset id="fieldset-default" tal:omit-tag="not:show_default_label">

                              <legend tal:condition="show_default_label"
                                      tal:attributes="id string:fieldsetlegend-default"
                                      tal:content="default_fieldset_label">Form name</legend>
                              <div id="teamname">
                                  <tal:widget tal:replace="structure view/widgets/name/@@ploneform-render-widget"/>
                              
                              <div id="labels">
                                    <div id="label_keeper" class="label"></div>
                                    <div id="label_defender" class="label"></div>
                                    <div id="label_midfield" class="label"></div>
                                    <div id="label_striker" class="label"></div>
                             </div>
                             <div id="starters">
                                    <div id="keeper" class="player">
                                              <tal:widget tal:replace="structure view/widgets/keeper/@@ploneform-render-widget"/>
                                    </div>
                                    <div id="defenders" class="player">
                                        <tal:widget tal:replace="structure view/widgets/defender1/@@ploneform-render-widget"/>
                                        <tal:widget tal:replace="structure view/widgets/defender2/@@ploneform-render-widget"/>
                                        <tal:widget tal:replace="structure view/widgets/defender3/@@ploneform-render-widget"/>                                        
                                   </div>
                                   <div id="midfield1" class="player">
                                       <tal:widget tal:replace="structure view/widgets/midfield1/@@ploneform-render-widget"/>
                                       <tal:widget tal:replace="structure view/widgets/midfield2/@@ploneform-render-widget"/>
                                       <tal:widget tal:replace="structure view/widgets/midfield3/@@ploneform-render-widget"/>                                        
                                  </div>
                                  <div id="midfield2" class="player">
                                      <tal:widget tal:replace="structure view/widgets/midfield4/@@ploneform-render-widget"/>
                                      <tal:widget tal:replace="structure view/widgets/midfield5/@@ploneform-render-widget"/>                                        
                                 </div>
                                 <div id="striker" class="player">
                                     <tal:widget tal:replace="structure view/widgets/striker1/@@ploneform-render-widget"/>
                                     <tal:widget tal:replace="structure view/widgets/striker2/@@ploneform-render-widget"/>
                                </div>
                                </div>
                                <div id="substitute">
                                    <div id="starters">
                                           <div id="keeper" class="player">
                                                     <tal:widget tal:replace="structure view/widgets/substitute_keeper/@@ploneform-render-widget"/>
                                           </div>
                                           <div id="defenders_sub" class="player">
                                               <tal:widget tal:replace="structure view/widgets/substitute_defender1/@@ploneform-render-widget"/>
                                               <tal:widget tal:replace="structure view/widgets/substitute_defender2/@@ploneform-render-widget"/>
                                               <tal:widget tal:replace="structure view/widgets/substitute_defender3/@@ploneform-render-widget"/>                                        
                                          </div>
                                          <div id="midfield1_sub" class="player">
                                              <tal:widget tal:replace="structure view/widgets/substitute_midfield1/@@ploneform-render-widget"/>
                                              <tal:widget tal:replace="structure view/widgets/substitute_midfield2/@@ploneform-render-widget"/>
                                              <tal:widget tal:replace="structure view/widgets/substitute_midfield3/@@ploneform-render-widget"/>                                        
                                         </div>
                                         <div id="midfield2_sub" class="player">
                                             <tal:widget tal:replace="structure view/widgets/substitute_midfield4/@@ploneform-render-widget"/>
                                             <tal:widget tal:replace="structure view/widgets/substitute_midfield5/@@ploneform-render-widget"/>                                        
                                        </div>
                                        <div id="striker_sub" class="player">
                                            <tal:widget tal:replace="structure view/widgets/substitute_striker1/@@ploneform-render-widget"/>
                                            <tal:widget tal:replace="structure view/widgets/substitute_striker2/@@ploneform-render-widget"/>
                                       </div>

                              </metal:define>
                          </fieldset>


                      </metal:define>
                    </metal:fields-slot>

                    <metal:actions-slot define-slot="actions">
                        <metal:define define-macro="actions">
                            <div class="formControls" tal:condition="view/actions/values|nothing">
                                <tal:block repeat="action view/actions/values">
                                    <input type="submit" tal:replace="structure action/render" />
                                </tal:block>
                            </div>
                        </metal:define>
                    </metal:actions-slot>

                    <metal:block define-slot="formbottom" />

                </form>
            </metal:define>
        </div>
    </body>
</html>
